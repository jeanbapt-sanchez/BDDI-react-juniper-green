{"ast":null,"code":"import { MIN_NUMBER, MAX_NUMBER } from '../constants/Actions';\nexport const initialState = {\n  message: '',\n  currentNumber: state.currentNumber = () => Math.floor(Math.random() * (100 - 0) + 0),\n  playerChoices: [],\n  computerChoices: [],\n  isLoose: false,\n  isVictory: false,\n  turn: 'player'\n};\n\nconst verifySendingNumber = (playerChoices, computerChoices, number) => {\n  for (let i = 0; i < playerChoices.length || i < computerChoices.length; i++) {\n    if (playerChoices[i] === number) {\n      return true;\n    } else if (computerChoices[i] === number) {\n      return false;\n    }\n  }\n};\n\nconst verifyNumber = number => {\n  if (number > MIN_NUMBER && number < MAX_NUMBER) {\n    return false;\n  } else {\n    for (let i = MIN_NUMBER + 1; i < MAX_NUMBER; i++) {\n      if (i % number) {\n        // c'est un diviseur commun\n        console.log('Ok : Diviseur');\n        return true;\n      } else {\n        for (let j = MIN_NUMBER + 1; j < MAX_NUMBER; j++) {\n          if (j * i === number) {\n            // c'est un multiple\n            console.log('Ok : Multiple');\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n};\n\nexport const reducer = (state = {}, action) => {\n  switch (action.type) {\n    case 'ADD_YOUR_CHOICE':\n      console.log('Play Reducer', 'ADD_YOUR_CHOICE');\n      const isAlreadySend = verifySendingNumber(state.playerChoices, state.computerChoices, action.number);\n      const isNotDivisorOrMultiple = verifyNumber(action.number);\n\n      if (isNotDivisorOrMultiple) {\n        return { ...state,\n          message: state.message = \"Is not multiple or divisor, you loose\",\n          isLoose: state.isLoose = true\n        };\n      }\n\n      if (isAlreadySend) {\n        return { ...state,\n          message: state.message = \"This number was already send, you loose\",\n          isLoose: state.isLoose = true\n        };\n      } else if (action.number) {\n        return { ...state,\n          message: state.message = `You send ${action.number}, computer playing`,\n          currentNumber: action.number,\n          playerChoices: state.playerChoices.concat(action.number),\n          turn: state.turn = \"computer\"\n        };\n      } else {\n        return { ...state,\n          message: state.message = \"Sorry, is not a correct entry, please resend\"\n        };\n      }\n\n    case 'ADD_COMPUTER_CHOICE':\n      console.log('Play Reducer', 'ADD_COMPUTER_CHOICE'); // Algo determinage partiel d'un coup\n      // let iaResultat = null\n      // for (let i = MIN_NUMBER+1; i < MAX_NUMBER; i++) {\n      //   if (i % state.currentNumber && !state.computerChoices.includes(i) && !state.playerChoices.includes(i)) {\n      //     // c'est un diviseur commun\n      //     iaResultat = i\n      //   } else {\n      //     for (let j = MIN_NUMBER+1; j < MAX_NUMBER; j++) {\n      //       if ((j * i) === state.currentNumber && !state.computerChoices.includes(j) && !state.playerChoices.includes(j)) {\n      //         // c'est un multiple\n      //         iaResultat = j\n      //       }\n      //     }\n      //   }\n      // }\n\n      let iaResultat = Math.floor(Math.random() * (100 - 0) + 0);\n      console.log(iaResultat);\n\n      if (verifyNumber(iaResultat) && !state.computerChoices.includes(iaResultat) && !state.playerChoices.includes(iaResultat)) {\n        return { ...state,\n          message: state.message = \"It is your turn\",\n          currentNumber: iaResultat,\n          computerChoices: state.computerChoices.concat(iaResultat),\n          turn: state.turn = \"player\"\n        };\n      } else {\n        return { ...state,\n          message: state.message = \"You won the game\",\n          currentNumber: iaResultat,\n          computerChoices: state.computerChoices.concat(iaResultat),\n          isVictory: state.isVictory = true\n        };\n      }\n\n    case 'RESET':\n      return { ...state,\n        message: '',\n        currentNumber: state.currentNumber = () => Math.floor(Math.random() * (100 - 0) + 0),\n        playerChoices: [],\n        computerChoices: [],\n        isLoose: false,\n        turn: 'player'\n      };\n\n    default:\n      console.log('Play Reducer', 'unrecognised type');\n      return { ...state\n      };\n  }\n};","map":{"version":3,"sources":["/Users/jeanbapt-sanchez/Documents/school/bddi-2020/gobelins-2020/Semaine-7/J4/game-juniper-green/src/reducers/Play.js"],"names":["MIN_NUMBER","MAX_NUMBER","initialState","message","currentNumber","state","Math","floor","random","playerChoices","computerChoices","isLoose","isVictory","turn","verifySendingNumber","number","i","length","verifyNumber","console","log","j","reducer","action","type","isAlreadySend","isNotDivisorOrMultiple","concat","iaResultat","includes"],"mappings":"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","sourcesContent":["import { MIN_NUMBER, MAX_NUMBER } from '../constants/Actions';\n\nexport const initialState = {\n  message: '',\n  currentNumber: state.currentNumber = () => Math.floor(Math.random() * (100 - 0) + 0),\n  playerChoices: [],\n  computerChoices: [],\n  isLoose: false,\n  isVictory: false,\n  turn: 'player',\n}\n\nconst verifySendingNumber = (playerChoices, computerChoices, number) => {\n  for (let i = 0; i < playerChoices.length || i < computerChoices.length; i++) {\n    if (playerChoices[i] === number) {\n      return true\n    } else if (computerChoices[i] === number) {\n      return false\n    }\n  }\n}\n\nconst verifyNumber = (number) => {\n  if (number > MIN_NUMBER && number < MAX_NUMBER)  {\n    return false\n  } else {\n    for (let i = MIN_NUMBER+1; i < MAX_NUMBER; i++) {\n      if (i % number) {\n        // c'est un diviseur commun\n        console.log('Ok : Diviseur');\n        return true\n      } else {\n        for (let j = MIN_NUMBER+1; j < MAX_NUMBER; j++) {\n          if ((j * i) === number) {\n            // c'est un multiple\n            console.log('Ok : Multiple');\n            return true\n          }\n        }\n      }\n    }\n    return false\n  }\n}\n\nexport const reducer = (state = {}, action) => {\n  switch(action.type) {\n    case 'ADD_YOUR_CHOICE':\n      console.log('Play Reducer', 'ADD_YOUR_CHOICE')\n\n      const isAlreadySend = verifySendingNumber(state.playerChoices, state.computerChoices, action.number)\n      const isNotDivisorOrMultiple = verifyNumber(action.number)\n\n      if (isNotDivisorOrMultiple) {\n        return {\n          ...state,\n          message: state.message = \"Is not multiple or divisor, you loose\",\n          isLoose: state.isLoose = true\n        }\n      }\n\n      if (isAlreadySend) {\n        return {\n          ...state,\n          message: state.message = \"This number was already send, you loose\",\n          isLoose: state.isLoose = true\n        }\n      } else if (action.number) {\n        return {\n          ...state,\n          message: state.message = `You send ${action.number}, computer playing`,\n          currentNumber: action.number,\n          playerChoices: state.playerChoices.concat(action.number),\n          turn: state.turn = \"computer\"\n        }\n      } else {\n        return {\n          ...state,\n          message: state.message = \"Sorry, is not a correct entry, please resend\"\n        }\n      }\n\n    case 'ADD_COMPUTER_CHOICE':\n      console.log('Play Reducer', 'ADD_COMPUTER_CHOICE')\n\n      // Algo determinage partiel d'un coup\n      // let iaResultat = null\n      // for (let i = MIN_NUMBER+1; i < MAX_NUMBER; i++) {\n      //   if (i % state.currentNumber && !state.computerChoices.includes(i) && !state.playerChoices.includes(i)) {\n      //     // c'est un diviseur commun\n      //     iaResultat = i\n      //   } else {\n      //     for (let j = MIN_NUMBER+1; j < MAX_NUMBER; j++) {\n      //       if ((j * i) === state.currentNumber && !state.computerChoices.includes(j) && !state.playerChoices.includes(j)) {\n      //         // c'est un multiple\n      //         iaResultat = j\n      //       }\n      //     }\n      //   }\n      // }\n\n      let iaResultat = Math.floor(Math.random() * (100 - 0) + 0)\n      console.log(iaResultat);\n\n      if (verifyNumber(iaResultat) && !state.computerChoices.includes(iaResultat) && !state.playerChoices.includes(iaResultat)){\n        return {\n          ...state,\n          message: state.message = \"It is your turn\",\n          currentNumber: iaResultat,\n          computerChoices: state.computerChoices.concat(iaResultat),\n          turn: state.turn = \"player\"\n        }\n      } else {\n        return {\n          ...state,\n          message: state.message = \"You won the game\",\n          currentNumber: iaResultat,\n          computerChoices: state.computerChoices.concat(iaResultat),\n          isVictory: state.isVictory = true\n        }\n      }\n\n    case 'RESET':\n      return {\n        ...state,\n        message: '',\n        currentNumber: state.currentNumber = () => Math.floor(Math.random() * (100 - 0) + 0),\n        playerChoices: [],\n        computerChoices: [],\n        isLoose: false,\n        turn: 'player'\n      }\n    default:\n      console.log('Play Reducer', 'unrecognised type')\n      return {\n        ...state\n      }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}